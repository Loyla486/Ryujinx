<UserControl
    x:Class="Ryujinx.Ava.UI.Views.User.UserSelector"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:locale="clr-namespace:Ryujinx.Ava.Common.Locale"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:flex="clr-namespace:Avalonia.Flexbox;assembly=Avalonia.Flexbox"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
<<<<<<< HEAD
    xmlns:viewModels="clr-namespace:Ryujinx.Ava.UI.ViewModels"
    xmlns:helpers="clr-namespace:Ryujinx.Ava.UI.Helpers"
=======
    xmlns:helpers="clr-namespace:Ryujinx.Ava.UI.Helpers"
    xmlns:viewModels="clr-namespace:Ryujinx.Ava.UI.ViewModels"
>>>>>>> 66aac324 (Fix Namespace Case)
    d:DesignHeight="450"
    MinWidth="500"
    d:DesignWidth="800"
    mc:Ignorable="d"
    Focusable="True">
    <UserControl.Resources>
        <helpers:BitmapArrayValueConverter x:Key="ByteImage" />
    </UserControl.Resources>
    <Design.DataContext>
        <viewModels:UserProfileViewModel />
    </Design.DataContext>
    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ListBox
            MaxHeight="300"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            DoubleTapped="ProfilesList_DoubleTapped"
            Items="{Binding Profiles}"
            SelectionChanged="SelectingItemsControl_SelectionChanged">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <flex:FlexPanel
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        AlignContent="FlexStart"
                        JustifyContent="Center" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.Styles>
                <Style Selector="ListBoxItem">
                    <Setter Property="Padding" Value="0" />
                    <Setter Property="Margin" Value="5" />
                    <Setter Property="CornerRadius" Value="4" />
                    <Setter Property="Background" Value="{DynamicResource AppListBackgroundColor}" />
                    <Style.Animations>
                        <Animation Duration="0:0:0.7">
                            <KeyFrame Cue="0%">
                                <Setter Property="MaxWidth" Value="0" />
                                <Setter Property="Opacity" Value="0.0" />
                            </KeyFrame>
                            <KeyFrame Cue="50%">
                                <Setter Property="MaxWidth" Value="1000" />
                                <Setter Property="Opacity" Value="0.3" />
                            </KeyFrame>
                            <KeyFrame Cue="100%">
                                <Setter Property="MaxWidth" Value="1000" />
                                <Setter Property="Opacity" Value="1.0" />
                            </KeyFrame>
                        </Animation>
                    </Style.Animations>
                </Style>
                <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                    <Setter Property="Background" Value="{DynamicResource AppListBackgroundColor}" />
                </Style>
                <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
                    <Setter Property="Background" Value="{DynamicResource AppListHoverBackgroundColor}" />
                </Style>
            </ListBox.Styles>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Border
                            Margin="2"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            ClipToBounds="True"
                            CornerRadius="5">
                            <StackPanel
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Spacing="5"
                                Margin="5">
                                <Image
                                    Width="96"
                                    Height="96"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Top"
                                    Source="{Binding Image, Converter={StaticResource ByteImage}}" />
                                <TextBlock
                                    HorizontalAlignment="Stretch"
                                    Width="96"
                                    Text="{Binding Name}"
                                    TextAlignment="Center"
                                    TextWrapping="Wrap"
                                    TextTrimming="CharacterEllipsis"
                                    MaxLines="2" />
                            </StackPanel>
                        </Border>
                        <Border
                            Width="10"
                            Height="10"
                            Margin="5"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Background="LimeGreen"
                            CornerRadius="5"
                            IsVisible="{Binding IsOpened}" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <Grid
            Grid.Row="1"
            HorizontalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button 
                HorizontalAlignment="Stretch"
                Grid.Row="0"
                Grid.Column="0"
                Margin="2"
                Click="AddUser"
                Width="200"
                Content="{locale:Locale UserProfilesAddNewProfile}" />
            <Button
                HorizontalAlignment="Stretch"
                Grid.Row="0"
                Margin="2"
                Grid.Column="1"
                Click="EditUser"
                Width="200"
                Content="{locale:Locale UserProfilesEditProfile}"
                IsEnabled="{Binding IsHighlightedProfileEditable}" />
            <Button 
                HorizontalAlignment="Stretch"
                Grid.Row="1"
                Grid.Column="0"
                Margin="2"
                Width="200"
                Content="{locale:Locale UserProfilesManageSaves}" 
                Click="ManageSaves" />
            <Button
                HorizontalAlignment="Stretch"
                Grid.Row="1"
                Grid.Column="1"
                Margin="2"
                Click="DeleteUser"
                Width="200"
                Content="{locale:Locale UserProfilesDeleteSelectedProfile}"
                IsEnabled="{Binding IsHighlightedProfileDeletable}" />
            <Button
                HorizontalAlignment="Stretch"
                Grid.Row="2"
                Grid.ColumnSpan="2"
                Grid.Column="0"
                Margin="2"
                Click="RecoverLostAccounts"
                Content="{locale:Locale UserProfilesRecoverLostAccounts}" />
        </Grid>
    </Grid>
</UserControl>